import type { Request, Response } from 'express';

const infrastructureData = {
  summary: {
    regions: 8,
    checkpoints: 12,
    pedestrianPoints: 5,
    lampPoles: 268,
  },
  facilities: [
    {
      id: 'FAC-001',
      type: '监测区域',
      name: 'Ikeja 商业区 A 区',
      region: 'Ikeja · Allen 大道',
      address: 'Allen 大道 20-50 号智慧灯杆群',
      coordinates: '6.601839, 3.351486',
      owner: 'Oluwaseun Ade',
      phone: '08012238899',
      status: '正常运行',
      buildDate: '2023-09-18',
      remark: '2025 年计划新增 2 根智慧灯杆',
    },
    {
      id: 'FAC-004',
      type: '交通卡口',
      name: 'Tin Can 港区卡口 B',
      region: 'Apapa · 港区北向出口',
      address: 'Tin Can Truck Gate B',
      coordinates: '6.435188, 3.349822',
      owner: 'Chinedu Lawson',
      phone: '08027719822',
      status: '待维护',
      buildDate: '2023-11-05',
      remark: '骨干链路将在 5 月 10 日凌晨切换',
    },
    {
      id: 'FAC-007',
      type: '行人通道点位',
      name: 'Oshodi 行人天桥中段',
      region: 'Oshodi BRT 枢纽',
      address: 'Oshodi Bridge Center',
      coordinates: '6.555303, 3.343987',
      owner: 'Grace Nneka',
      phone: '08031157644',
      status: '正常运行',
      buildDate: '2024-02-25',
      remark: '夜间高峰需加派巡检',
    },
    {
      id: 'FAC-010',
      type: '智慧灯杆',
      name: 'VI-03 智慧灯杆',
      region: 'Victoria Island',
      address: 'Adeola Odeku × Akin Adesola',
      coordinates: '6.428512, 3.421087',
      owner: 'Sara Yusuf',
      phone: '08037782288',
      status: '待维护',
      buildDate: '2023-12-10',
      remark: '计划 5 月 12 日更换 UPS',
    },
    {
      id: 'FAC-012',
      type: '交通卡口',
      name: 'Balogun 市场南向卡口',
      region: 'Lagos Island · Balogun',
      address: 'Balogun 南入口 3#',
      coordinates: '6.452772, 3.395870',
      owner: 'Idris Ajayi',
      phone: '08052337611',
      status: '停用',
      buildDate: '2022-08-09',
      remark: '正在进行道路改造，暂不监测',
    },
  ],
};

const resourceData = {
  summary: {
    vehicles: 6,
    engineers: 24,
    spareParts: 128,
  },
  resources: [
    {
      id: 'RES-V-01',
      resourceType: '运维车辆',
      name: '应急保障车-1',
      status: '任务中',
      department: '运维调度中心',
      contact: 'Idris Ajayi',
      phone: '08052337611',
      detail: '柴油高顶厢车，随车携带 8m 云梯 + 工具箱',
      lastDispatch: '2024-05-09 09:30',
    },
    {
      id: 'RES-V-03',
      resourceType: '运维车辆',
      name: '巡检电动车队',
      status: '待命',
      department: 'Oshodi 现场点',
      contact: 'Grace Nneka',
      phone: '08031157644',
      detail: '3 辆电动巡检车，续航 80km',
      lastDispatch: '2024-05-08 21:00',
    },
    {
      id: 'RES-P-08',
      resourceType: '运维人员',
      name: 'Abiola (算法)',
      status: '执行任务',
      department: 'AI 算法保障组',
      contact: 'Abiola',
      phone: '08012238899',
      detail: '负责算法升级与远程排障',
      lastDispatch: '2024-05-09 08:50',
    },
    {
      id: 'RES-P-12',
      resourceType: '运维人员',
      name: 'Sara (卡口)',
      status: '休假',
      department: '交通卡口保障组',
      contact: 'Sara Yusuf',
      phone: '08037782288',
      detail: '交通卡口高空作业资质',
    },
    {
      id: 'RES-S-03',
      resourceType: '设备配件',
      name: '4G 无线网关模块',
      status: '库存充足',
      department: 'Tin Can 前置仓',
      contact: 'Chinedu Lawson',
      phone: '08027719822',
      detail: '可替换 15 套，适配 GW-600/620',
      lastDispatch: '2024-05-08 14:20',
    },
    {
      id: 'RES-S-06',
      resourceType: '设备配件',
      name: '高清摄像机套件',
      status: '库存不足',
      department: 'Didikon 中央仓',
      contact: '仓储系统',
      phone: '08020001111',
      detail: '剩余 5 套（需补货至 20 套）',
    },
  ],
};

const faultData = {
  stats: {
    todayFaults: 7,
    inProgress: 3,
    waiting: 2,
  },
  orders: [
    {
      id: 'WO-20240509-01',
      deviceId: 'DEV-GW-208',
      deviceName: '4G 无线网关-港口二期',
      reportedAt: '2024-05-09 09:42:11',
      faultType: '网络中断',
      description: '港区卡口 B 网关 30 分钟无心跳',
      level: '紧急（1 小时）',
      dispatchTime: '2024-05-09 09:48:30',
      owner: 'Idris Ajayi',
      status: '处理中',
      solution: '现场更换放大模块，准备备用设备',
      remark: '需携带 4G 模块与光纤跳线',
    },
    {
      id: 'WO-20240509-03',
      deviceId: 'DEV-AIE-006',
      deviceName: 'AI 边缘节点-维多利亚路口',
      reportedAt: '2024-05-09 08:55:02',
      faultType: 'CPU 过载',
      description: '算法升级后 CPU 占用 88%',
      level: '重要（4 小时）',
      dispatchTime: '2024-05-09 09:05:00',
      owner: 'Abiola',
      status: '处理中',
      solution: '回退至 v2.3 并重新部署模型',
    },
    {
      id: 'WO-20240509-05',
      deviceId: 'DEV-AIE-010',
      deviceName: 'AI 边缘节点-人行通道一期',
      reportedAt: '2024-05-09 07:28:41',
      faultType: '硬件损坏',
      description: '风扇异常导致温度告警',
      level: '重要（4 小时）',
      dispatchTime: '2024-05-09 07:40:00',
      owner: 'Grace Nneka',
      status: '已解决',
      solution: '更换风扇组件并清洁散热片',
      finishTime: '2024-05-09 09:12:30',
      result: '完全解决',
    },
    {
      id: 'WO-20240509-06',
      deviceId: 'DEV-GW-215',
      deviceName: '4G 无线网关-人行通道二期',
      reportedAt: '2024-05-09 06:15:12',
      faultType: '设备离线',
      description: '施工断电导致离线',
      level: '一般（24 小时）',
      dispatchTime: '2024-05-09 06:30:00',
      owner: 'Grace Nneka',
      status: '待处理',
      remark: '等待施工方恢复供电',
    },
    {
      id: 'WO-20240509-07',
      deviceId: 'DEV-AIE-001',
      deviceName: 'AI 边缘节点-拉各斯 CBD',
      reportedAt: '2024-05-09 10:15:03',
      faultType: '软件异常',
      description: '密度算法偶发崩溃',
      level: '一般（24 小时）',
      dispatchTime: '2024-05-09 10:32:55',
      owner: 'Abiola',
      status: '待派单',
    },
  ],
};

const statisticsData = {
  period: '近 7 天',
  totalFaults: 32,
  resolved: 28,
  resolveRate: 87.5,
  avgHandleDuration: '02:18',
  typeDistribution: [
    { type: '网络中断', value: 10 },
    { type: '硬件损坏', value: 7 },
    { type: '软件异常', value: 6 },
    { type: '电源故障', value: 5 },
    { type: '其他', value: 4 },
  ],
  topDevices: [
    { deviceName: '4G 无线网关-港口二期', count: 3 },
    { deviceName: 'AI 边缘节点-维多利亚路口', count: 3 },
    { deviceName: 'AI 边缘节点-Oshodi 天桥', count: 2 },
  ],
  topEngineers: [
    { engineer: 'Idris Ajayi', handled: 6, rate: 0.92 },
    { engineer: 'Grace Nneka', handled: 5, rate: 0.88 },
    { engineer: 'Abiola', handled: 4, rate: 0.85 },
  ],
  generatedAt: '2024-05-09 10:30:00',
};

export default {
  'GET /api/operations/infrastructure': (req: Request, res: Response) => {
    res.json({ success: true, data: infrastructureData });
  },
  'GET /api/operations/resources': (req: Request, res: Response) => {
    res.json({ success: true, data: resourceData });
  },
  'GET /api/operations/faults': (req: Request, res: Response) => {
    res.json({ success: true, data: faultData });
  },
  'GET /api/operations/statistics': (req: Request, res: Response) => {
    res.json({ success: true, data: statisticsData });
  },
};
