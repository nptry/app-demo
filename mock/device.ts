import type { Request, Response } from 'express';

const basicInfoData = {
  summary: {
    total: 18,
    aiEdge: 10,
    gateways: 8,
    online: 16,
  },
  devices: [
    {
      id: 'AIE-001',
      name: 'AI 边缘节点-拉各斯 CBD',
      type: 'AI 边缘计算设备',
      model: 'AIE-4000',
      vendor: 'Didikon',
      application: '重点区域',
      location: 'Ikeja 商业区智慧灯杆 #12',
      coordinates: '6.601839, 3.351486',
      status: 'online',
    },
    {
      id: 'AIE-004',
      name: 'AI 边缘节点-港口堆场',
      type: 'AI 边缘计算设备',
      model: 'AIE-4200',
      vendor: 'Didikon',
      application: '交通卡口',
      location: 'Tin Can 港区闸口 3',
      coordinates: '6.436111, 3.358056',
      status: 'online',
    },
    {
      id: 'AIE-006',
      name: 'AI 边缘节点-维多利亚路口',
      type: 'AI 边缘计算设备',
      model: 'AIE-4200',
      vendor: 'Didikon',
      application: '交通卡口',
      location: 'VI 主干道与Adeola Odeku交叉口',
      coordinates: '6.428512, 3.421087',
      status: 'maintenance',
    },
    {
      id: 'GW-201',
      name: '4G 无线网关-商业区 A',
      type: '4G 无线网关',
      model: 'GW-600',
      vendor: 'Didikon',
      application: '重点区域',
      location: 'Ikeja 商业区光纤汇聚点',
      coordinates: '6.601012, 3.346120',
      status: 'online',
    },
    {
      id: 'GW-208',
      name: '4G 无线网关-拉各斯港 2 号',
      type: '4G 无线网关',
      model: 'GW-600',
      vendor: 'Didikon',
      application: '交通卡口',
      location: 'Tin Can 港区出入口',
      coordinates: '6.433498, 3.352112',
      status: 'offline',
    },
    {
      id: 'AIE-010',
      name: 'AI 边缘节点-人行通道一期',
      type: 'AI 边缘计算设备',
      model: 'AIE-3800',
      vendor: 'Didikon',
      application: '行人通道',
      location: 'Oshodi 行人天桥',
      coordinates: '6.555303, 3.343987',
      status: 'maintenance',
    },
    {
      id: 'AIE-012',
      name: 'AI 边缘节点-商贸区北侧',
      type: 'AI 边缘计算设备',
      model: 'AIE-4000',
      vendor: 'Didikon',
      application: '重点区域',
      location: 'Balogun 市场外侧',
      coordinates: '6.452772, 3.395870',
      status: 'online',
    },
    {
      id: 'GW-215',
      name: '4G 无线网关-人行通道二期',
      type: '4G 无线网关',
      model: 'GW-620',
      vendor: 'Didikon',
      application: '行人通道',
      location: 'Oshodi BRT 枢纽',
      coordinates: '6.548924, 3.343105',
      status: 'online',
    },
  ],
};

const configInfoData = {
  applicationSummary: [
    {
      type: '重点区域',
      count: 6,
      coverage: 'Ikeja 商业区 / Balogun 市场',
      aiModels: ['人群密度', '人流方向', '重点人员'],
    },
    {
      type: '交通卡口',
      count: 7,
      coverage: '港口闸口 / 主干路路口',
      aiModels: ['车牌识别', '逆行检测', '红灯抓拍'],
    },
    {
      type: '行人通道',
      count: 5,
      coverage: 'Oshodi 行人天桥 / BRT 枢纽',
      aiModels: ['行人统计', '陌生人识别'],
    },
  ],
  deployments: [
    {
      id: 'CFG-001',
      deviceName: 'AI 边缘节点-拉各斯 CBD',
      applicationType: '重点区域',
      deploymentArea: 'Ikeja 商业区 A 区',
      poleCode: 'IKEJA-12',
      location: 'Allen 大道智慧灯杆 12 号',
      coordinates: '6.601839, 3.351486',
      network: '市电 + 4G 回传',
      edgeApps: ['人群密度', '人流统计'],
    },
    {
      id: 'CFG-003',
      deviceName: '4G 无线网关-港口二期',
      applicationType: '交通卡口',
      deploymentArea: 'Tin Can 港区卡口 B',
      poleCode: 'TC-08',
      location: '港区北向出口',
      coordinates: '6.435188, 3.349822',
      network: '市电 + 4G/光纤备份',
      edgeApps: ['车牌识别', '车流统计'],
    },
    {
      id: 'CFG-006',
      deviceName: 'AI 边缘节点-维多利亚路口',
      applicationType: '交通卡口',
      deploymentArea: 'Victoria Island 主干路',
      poleCode: 'VI-03',
      location: 'Adeola Odeku 与 Akin Adesola 路口',
      coordinates: '6.428512, 3.421087',
      network: '市电 + UPS',
      edgeApps: ['红灯抓拍', '逆行检测'],
    },
    {
      id: 'CFG-009',
      deviceName: 'AI 边缘节点-人行通道一期',
      applicationType: '行人通道',
      deploymentArea: 'Oshodi 行人通行区',
      poleCode: 'OSH-01',
      location: 'Oshodi 天桥中段',
      coordinates: '6.555303, 3.343987',
      network: '市电 + 太阳能备份',
      edgeApps: ['行人统计', '陌生人识别'],
    },
    {
      id: 'CFG-011',
      deviceName: '4G 无线网关-商贸区北侧',
      applicationType: '重点区域',
      deploymentArea: 'Balogun 市场北区',
      poleCode: 'BAL-04',
      location: 'Balogun 市场北入口',
      coordinates: '6.452772, 3.395870',
      network: '市电 + 4G',
      edgeApps: ['重点人员识别'],
    },
    {
      id: 'CFG-014',
      deviceName: 'AI 边缘节点-人行通道二期',
      applicationType: '行人通道',
      deploymentArea: 'Oshodi BRT 枢纽',
      poleCode: 'OSH-05',
      location: 'BRT 站厅北侧',
      coordinates: '6.548924, 3.343105',
      network: '市电 + 4G',
      edgeApps: ['行人统计', '重点人员'],
    },
  ],
};

const statusData = {
  metrics: {
    uptime: 99.42,
    offlineDevices: 1,
    warnings: 2,
    lastSync: '2024-05-09 10:42:16',
  },
  statuses: [
    {
      id: 'STA-001',
      deviceName: 'AI 边缘节点-拉各斯 CBD',
      type: 'AI 边缘计算设备',
      status: 'online',
      lastHeartbeat: '2024-05-09 10:38:11',
      healthScore: 92,
      temperature: 42,
      powerLoad: '1.2kW / 55%',
      networkLatency: 68,
    },
    {
      id: 'STA-003',
      deviceName: 'AI 边缘节点-维多利亚路口',
      type: 'AI 边缘计算设备',
      status: 'warning',
      lastHeartbeat: '2024-05-09 10:37:02',
      healthScore: 74,
      temperature: 63,
      powerLoad: '1.8kW / 78%',
      networkLatency: 142,
    },
    {
      id: 'STA-005',
      deviceName: '4G 无线网关-港口二期',
      type: '4G 无线网关',
      status: 'warning',
      lastHeartbeat: '2024-05-09 10:34:20',
      healthScore: 61,
      temperature: 49,
      powerLoad: '0.8kW / 63%',
      networkLatency: 265,
    },
    {
      id: 'STA-006',
      deviceName: '4G 无线网关-拉各斯港 2 号',
      type: '4G 无线网关',
      status: 'offline',
      lastHeartbeat: '2024-05-09 09:58:41',
      healthScore: 0,
      temperature: 0,
      powerLoad: '0kW',
      networkLatency: 0,
    },
    {
      id: 'STA-008',
      deviceName: 'AI 边缘节点-人行通道一期',
      type: 'AI 边缘计算设备',
      status: 'online',
      lastHeartbeat: '2024-05-09 10:39:26',
      healthScore: 88,
      temperature: 47,
      powerLoad: '1.0kW / 60%',
      networkLatency: 83,
    },
    {
      id: 'STA-010',
      deviceName: '4G 无线网关-人行通道二期',
      type: '4G 无线网关',
      status: 'online',
      lastHeartbeat: '2024-05-09 10:40:10',
      healthScore: 95,
      temperature: 38,
      powerLoad: '0.7kW / 44%',
      networkLatency: 71,
    },
  ],
  alerts: [
    {
      id: 'AL-01',
      deviceName: '4G 无线网关-港口二期',
      issue: '网络时延高于 250ms',
      triggeredAt: '2024-05-09 09:55',
      handler: 'Abiola',
      status: '处理中',
    },
    {
      id: 'AL-02',
      deviceName: 'AI 边缘节点-人行通道一期',
      issue: '设备温度达到 65℃，已切换至风冷模式',
      triggeredAt: '2024-05-09 08:43',
      handler: 'Chinedu',
      status: '已关闭',
    },
    {
      id: 'AL-03',
      deviceName: 'AI 边缘节点-维多利亚路口',
      issue: '算法升级后 CPU 占用 82%',
      triggeredAt: '2024-05-09 08:15',
      handler: 'Sara',
      status: '处理中',
    },
  ],
  trend: [
    { time: '02:00-04:00', online: 16, warnings: 1, offline: 1 },
    { time: '04:00-06:00', online: 16, warnings: 1, offline: 1 },
    { time: '06:00-08:00', online: 17, warnings: 1, offline: 0 },
    { time: '08:00-10:00', online: 17, warnings: 2, offline: 1 },
    { time: '10:00-12:00', online: 16, warnings: 2, offline: 1 },
  ],
};

export default {
  'GET /api/device/basic-info': (req: Request, res: Response) => {
    res.json({
      success: true,
      data: basicInfoData,
    });
  },
  'GET /api/device/config-info': (req: Request, res: Response) => {
    res.json({
      success: true,
      data: configInfoData,
    });
  },
  'GET /api/device/status': (req: Request, res: Response) => {
    res.json({
      success: true,
      data: statusData,
    });
  },
};
